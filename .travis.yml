language: cpp
compiler: gcc
language: cpp
sudo: required
dist: trusty
os: linux


before_install:
    - echo Install dependencies
    - sudo apt-get -qq update
    - sudo apt-get -q -y install libusb-1.0-0-dev libcfitsio3-dev libnova-dev
    - sudo apt-get -q -y install libgphoto2-dev libgps-dev libjpeg-dev cdbs
    - sudo apt-get -q -y install libopenal-dev libgsl0-dev libboost-dev
    - sudo apt-get -q -y install libboost-regex-dev libftdi-dev dcraw fakeroot wget

install:
    - mkdir -p build
    - cd build
    - git clone https://github.com/google/googletest.git
    - cd googletest
    - mkdir build
    - cd build
    - cmake ..
    - make
    - sudo make install
    - cd ../..
    - mkdir -p libindi
    - cd libindi
    - cmake -DCMAKE_INSTALL_PREFIX=/usr/local/ . ../../libindi/
    - make
    - sudo make install
    - cd test
    
script:
    - echo Test
    - pwd
    - ctest -V
    

